name : Compile

on:
  push:
    branches:
        - master
    paths:
        - 'src/**'
        - 'assets/**'

jobs:
    build:
        runs-on: windows-latest
    
        steps:
        - name: Checkout code
          uses: actions/checkout@v4.1.0
    
        - name: Set up Python
          uses: actions/setup-python@v4.7.1
          with:
            python-version: 3.11.5

        
    
        - name: Install Python dependencies
          run: |
            pip install -r requirements.txt
            working-directory: ${{ github.workspace }}
    
        - name: Build
          run: |
            python setup.py build

        - name : Install Zip
          uses: montudor/action-zip@v1.0.0

        - name: Zip
          run:
            zip -qq -r build.zip build
          
        - name: Upload artifacts
          uses: actions/upload-artifact@v3.1.3
          with:
            name: Dandilion
            path: build